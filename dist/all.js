"use strict";({init:function(){this.settings(),this.addGrid(),this.keyControls(),this.menuControls()},settings:function(){this.app=document.querySelector(".maze"),this.sizes=this.app.getBoundingClientRect(),this.width=this.sizes.width,this.height=this.sizes.height,this.blockSize=15,this.playerSize=2*this.blockSize,this.blockCount=0,this.blockCountLabel=this.app.querySelector(".maze__label--count"),this.playerColor="green",this.totalBlocks=this.width*this.height/(this.blockSize*this.blockSize),this.grid=this.app.querySelector(".maze-grid"),this.path=this.app.querySelector(".maze-path"),this.area=this.app.querySelector(".maze-player"),this.walls=this.app.querySelector(".maze-wall"),this.waypoints=this.app.querySelector(".maze-point"),this.selector=this.app.querySelector(".maze-selector")},addGrid:function(){for(var e=0;e<this.totalBlocks;e++){var t=this.createElement("div",["maze-cell"]);this.grid.appendChild(t)}for(var i=!0,l=10.5*this.playerSize,s=0,o=0;i;){o++;var r=this.createElement("div",["maze-point__point","maze-point__point--small","maze-blocker"]);this.walls.appendChild(r),r.style.top=l+"px",r.style.left=s+"px",l+this.blockSize>=this.height&&(i=!1),100<o&&(i=!1),l+=this.blockSize,s+=this.blockSize}},menuControls:function(){for(var e=this.app.querySelectorAll(".maze-button"),t=0;t<e.length;t++){e[t].addEventListener("click",this.buttonEvent.bind(this))}},keyControls:function(){window.addEventListener("keydown",this.moveSelector.bind(this)),window.addEventListener("keyup",this.moveSelector.bind(this))},createElement:function(e,t){for(var i=document.createElement(e),l=0;l<t.length;l++){var s=t[l];i.classList.add(s)}return i},buttonEvent:function(e){var t=e.target.getAttribute("data-value"),i=this.app.querySelector(".maze__label--color"),l="background--"+t;"reset"===t?this.reset():(i.textContent=t,i.className="",i.classList.add("maze__label"),i.classList.add("maze__label--color"),i.classList.add(l),this.playerColor=t)},checkCollision:function(e,t,i){var l=this.grid.getBoundingClientRect(),s=l.width,o=l.height;return(37!==i||0!==e)&&((38!==i||0!==t)&&((39!==i||e!==s-30)&&(40!==i||t!==o-30)))},checkOverlap:function(e,t){for(var i=this.area.querySelectorAll(".maze-block"),l=this.app.querySelectorAll(".maze-blocker"),s=e+this.playerSize,o=t+this.playerSize,r=0;r<l.length;r++){var a=l[r],n=a.getBoundingClientRect(),h=n.width,c=n.height,p=parseInt(window.getComputedStyle(a).getPropertyValue("left")),u=parseInt(window.getComputedStyle(a).getPropertyValue("top"));if(!(p+h<=e||s<=p||u+c<=t||o<=u))return!0}for(var d=0;d<i.length;d++){var y=i[d],k=parseInt(y.style.left),v=parseInt(y.style.top),f=k+this.playerSize,m=v+this.playerSize;if(k===e&&v===t)return y.remove(),this.blockCount--,this.updateBlockCount(),!0;if(!(f<=e||s<=k||m<=t||o<=v))return!0}return!1},createBlock:function(e,t){var i=this.createElement("div",["maze-block"]),l=e+"px",s=t+"px";if(!this.checkOverlap(e,t)){var o="background--"+this.playerColor;i.classList.add(o),this.area.appendChild(i),this.blockCount++,this.updateBlockCount(),i.style.left=l,i.style.top=s}},moveSelector:function(e){var t=window.getComputedStyle(this.selector),i=parseInt(t.getPropertyValue("top")),l=parseInt(t.getPropertyValue("left")),s=e.keyCode,o=this.checkCollision(l,i,s),r=e.type;if(o)switch(e.keyCode){case 37:if(e.preventDefault(),"keydown"===r){var a=l-15+"px";this.selector.style.left=a}break;case 38:if(e.preventDefault(),"keydown"===r){var n=i-15+"px";this.selector.style.top=n}break;case 39:if(e.preventDefault(),"keydown"===r){var h=l+15+"px";this.selector.style.left=h}break;case 40:if(e.preventDefault(),"keydown"===r){var c=i+15+"px";this.selector.style.top=c}break;case 32:e.preventDefault(),"keyup"===e.type&&this.createBlock(l,i)}},updateBlockCount:function(){this.blockCountLabel.textContent=this.blockCount},reset:function(){for(var e=this.area.querySelectorAll(".maze-block"),t=0;t<e.length;t++){e[t].remove()}this.blockCount=0,this.updateBlockCount()}}).init();